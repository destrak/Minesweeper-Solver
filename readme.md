# Бот для игры "Сапер"

## Возможности
Параметры игры задаются в конструкторе класса `Game`:
- `height` - высота поля в пикселях;
- `width` - ширина поля в пикселях;
- `cell_size` - размер клетки в пикселях
- `bomb_number` - число бомб;
- `fps` - количество кадров в секунду;
- `saved_field` - сохраненное поле, по умолчанию None.

Команды:
- Открыть клетку - `ЛКМ`;
- Пометить клетку - `ПКМ`.

Игра автоматически сохраняется после закрытия интерфейса в файл `data.pickle`. Перед 
игрой 
пользователю в 
консоли предлагается два формата игры:
- `Regular` - обычная игра;
- `Solver` - запуск бота.

Класс `Solver` принимает на вход видимое поле.

## Логика игры бота

Алгоритм был взят из этой статьи: [Хабр](https://habr.com/ru/post/211188/).

Основная идея заключается в расчете вероятности нахождения бомбы в каждой клетке поля, 
исходя из уже открытых клеток. Для начала считаем вероятности для отдельных клеток, 
в результате этого в одной клетке могут оказаться несколько вероятностей как следствие 
влияния нескольких клеток, смежных друг с другом. Для вычисления вероятности 
нахождения мины в ячейке рядом с несколькими открытыми ячейками используем формулу
расчета вероятности хотя бы одного события: вероятность наступления события `А`, 
состоящего в появлении хотя бы одного из событий `А1, А2,..., An`, независимых в 
совокупности, равна разности между единицей и произведением вероятностей противоположных 
событий:

`А = 1 - (1 - A1) * (1 - A2) * ... * (1 - An)`. 

Однако следует помнить, что 
сумма вероятностей в каждой группе ячеек должна быть равна количеству мин в группе.  
Поэтому все значения в каждой группе нужно домножить так, чтобы в итоге их сумма была 
равна числу мин. Это число равно количеству мин в группе, деленное на текущую сумму 
вероятностей ячеек группы. Подобный расчет для второй группы проводим уже с учетом 
корректировки от предыдущей. После этого вероятность в общих ячейках снова изменится, 
поэтому подобное уравнивание для каждой группы нужно повторить несколько раз, пока 
система не придет к некоторым стабильным значениям, которые и будут истинными
вероятностями нахождения мин в ячейках. Остается только выбрать одну из ячеек с 
минимальной вероятностью и сделать ход.